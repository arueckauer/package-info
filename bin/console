#!/usr/bin/env php
<?php

use PackageInfo\Cache\BuildCommand;
use PackageInfo\Command\PackageInfoGetCommand;
use PackageInfo\Command\PackageInfoListCommand;
use PackageVersions\Versions;
use Symfony\Component\Console\Application;

require dirname(__DIR__) . '/vendor/autoload.php';

call_user_func(static function() {
    $container = require dirname(__DIR__) . '/config/container.php';

    $version = strstr(Versions::getVersion('arueckauer/package-info'), '@', true);
    $application = new Application('arueckauer/package-info', $version);

    $application->addCommands([
        $container->get(BuildCommand::class),
        $container->get(PackageInfoGetCommand::class),
        $container->get(PackageInfoListCommand::class),
    ]);

    $application->run();
});
